AI_Slide_with_nano_banana フロントエンド仕様書 (v1.0)1. プロジェクト概要本ドキュメントは、LangGraphベースのAIスライド生成アプリケーション「AI_Slide_with_nano_banana」のフロントエンド仕様を定義する。ユーザーはエージェント群（Supervisor, Planner, Workers）と協働し、対話とアーティファクト（成果物）の確認を通じて、一枚絵の高品質なスライドを作成する。2. 技術スタックFramework: Next.js 14+ (App Router)Language: TypeScriptStyling: Tailwind CSS (Dark Mode base) / shadcn/ui (コンポーネントライブラリ推奨)State Management: Zustand (推奨) or React ContextAuth: Firebase AuthenticationIcons: Lucide-reactCommunication: Server-Sent Events (SSE) for Real-time streamingMarkdown/Rendering: react-markdown, remark-gfm3. 画面遷移・構成アプリケーションは大きく「ホーム画面」と「ワークスペース画面」の2つで構成される。Login Screen: Firebase Authによるログイン（Google/Email）。Home Screen (Initial State): シンプルな入力インターフェース。Workspace Screen (Processing): チャット、ログ、プレビューを行うメイン画面。4. UIデザイン・レイアウト詳細4.1 全体共通デザイン (Design System)Theme: Dark Mode (Deep Zinc/Slate colors: bg-zinc-950, text-zinc-100)。Sidebar: 画面左端に配置（幅260px固定または折りたたみ）。過去の履歴リストを表示。4.2 ホーム画面 (Home Screen)コンセプト: 検索エンジンのトップページのようなシンプルさ。配置:画面中央に大きな入力エリア（Textarea）。「ファイル添付」アイコン（クリップマーク）。「Generate」ボタン。（任意）下部に「最近のアクティビティ」へのリンク。挙動: 入力して送信すると、新しいSession IDを発行し、ワークスペース画面へ遷移する。4.3 ワークスペース画面 (Workspace Screen)Dual-Pane Layout (左右分割)Ratio: 50% (Left) : 50% (Right) - ドラッグでリサイズ可能。【左ペイン：Communication & Process】ManusのUIを参考にした、タイムライン形式のインターフェース。以下の要素が時系列で流れる。User Message: 右寄せ。ユーザーの入力。Agent Log (Process Visualization):表示: 常に詳細表示（Terminalライク）。内容: LangGraphのノード遷移（Coordinator -> Planner -> Researcherなど）、ツール実行ログ。Style: モノスペースフォント、薄い色味で表示し、視覚的なノイズになりすぎないようにする。Artifact Card (成果物オブジェクト):重要: 中間成果物が生成されたタイミングで挿入される「カード型」要素。例: [📄 構成案を作成しました], [📊 調査レポート(Web)], [🖼️ スライド画像(v1)]Action: クリックすると、右ペインにその内容が表示される。【右ペイン：Artifact Preview】デフォルトは「Empty State（ロゴなどを表示）」。左ペインでArtifact Cardがクリックされると、該当するビューワーを表示する。Markdown Viewer: 調査レポートやメモ用。Structure Viewer: スライドのアウトライン（階層構造）を表示。Image Viewer (Canvas): 生成された「全スライド一枚絵」を表示。機能: Zoom In/Out, Pan。In-painting UI: 画像上にレイヤーを重ね、矩形選択（Rectangle）を可能にする。5. 機能要件 (Functional Requirements)5.1 チャット・ストリーミング処理 (SSE)バックエンドからのSSEストリームを解析し、以下のイベントタイプごとにUIを更新する。event: log → Agent Logとして表示。event: message → エージェントからの会話メッセージ。event: artifact → Artifact Cardをチャット欄に生成し、内部データ（成果物のID、タイプ、内容）を保持する。割り込みチャット: ストリーミング完了後（エージェントが待機状態）に、追加の修正指示を送ることができる。5.2 Artifactとプレビュー連携データ構造: フロントエンドは artifacts 配列を持つ。TypeScripttype Artifact = {
  id: string;
  type: 'report' | 'outline' | 'image';
  title: string;
  content: any; // Markdown text or Image URL
  version: number;
};
UX: ユーザーが「クリック」するまで右画面は切り替わらない（勝手に画面が変わって閲覧を邪魔しない設計）。5.3 画像修正 (In-painting)トリガー: Right Paneで画像表示中に、ツールバーから「修正(In-paint)」モードを選択。操作:画像上の修正したいエリアを**矩形選択（Rectangle Selection）**する。選択エリアの近くにPopover（入力フォーム）が出現。ユーザーが指示を入力（例：「ここのグラフを棒グラフに変更して」）。「送信」ボタン押下。API送信: 座標情報 (x, y, w, h) と prompt をバックエンドへ送信。5.4 履歴管理 (Sidebar)Firebase Authの uid をキーにして、Firestore等からセッション一覧を取得。クリックで過去のセッション（チャットログとArtifacts）を復元する。6. API連携仕様 (Interface Definition)6.1 エンドポイント一覧MethodPathDescriptionPayload ExamplePOST/api/chat/start新規セッション開始（Home画面）{ message: "...", files: [...] }GET/api/chat/:sessionId/streamSSE接続。ログ、メッセージ、Artifactを受信-POST/api/chat/:sessionId/message既存セッションへの追加指示（割り込み）{ message: "..." }POST/api/image/:imageId/inpaint画像修正指示{ rect: {x,y,w,h}, prompt: "..." }GET/api/historyサイドバー用履歴取得Headers: { Authorization: Bearer ... }6.2 SSE イベント形式JSON// event: log
{ "agent": "Researcher", "step": "Searching Google", "status": "running" }

// event: artifact
{ 
  "id": "art_123", 
  "type": "outline", 
  "title": "提案書構成案", 
  "content": "# Title\n## Slide 1..." 
}
7. 開発・実装の優先順位Core: ホーム画面からチャット画面への遷移、SSEによるテキストメッセージとAgentログの表示（基盤作成）。Artifacts: ストリームから受け取ったデータを「カード」として表示し、クリックで右画面にMarkdownを表示する機能。Image & In-painting: 生成された画像の表示と、Canvas APIを用いた矩形選択UIの実装。Auth & History: Firebase連携とサイドバーの実装。